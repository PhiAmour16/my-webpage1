<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´„æœƒæ‡‰ç”¨ç¨‹å¼è¡Œç‚ºçµæœé æ¸¬</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            background: #0078d7;
            color: #fff;
            padding: 10px 20px;
            text-align: center;
        }

        header h1 {
            margin: 0;
        }

        nav {
            background: #333;
            display: flex;
            justify-content: center;
            padding: 10px 0;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            padding: 10px 20px;
            margin: 0 10px;
            border-radius: 5px;
            font-weight: bold;
        }

        nav a:hover, nav a.active {
            background: #0078d7;
        }

        main {
            padding: 20px;
            display: none;
        }

        section {
            display: none;
        }

        section.active {
            display: block;
        }

        section h2 {
            color: #0078d7;
        }

        section p, section ul {
            margin-bottom: 10px;
        }

        ul {
            padding-left: 20px;
        }

        ul li {
            margin-bottom: 5px;
        }

        ul li ul {
            margin-left: 20px;
            list-style-type: circle;
        }
    </style>
</head>
<body>
    <header>
        <h1>ç´„æœƒæ‡‰ç”¨ç¨‹å¼è¡Œç‚ºçµæœé æ¸¬</h1>
    </header>
    <nav>
        <a href="#" data-target="intro">å°ˆæ¡ˆç°¡ä»‹</a>
        <a href="#" data-target="project">å°ˆæ¡ˆä»‹ç´¹</a>
        <a href="#" data-target="data">æ•¸æ“šæè¿°</a>
        <a href="#" data-target="model">æ¨¡å‹é¸æ“‡èˆ‡è¨“ç·´</a>
        <a href="#" data-target="results">é æ¸¬çµæœ</a>
        <a href="#" data-target="insight">çµ„å“¡å¿ƒå¾—</a>
        <a href="#" data-target="dialogue">èˆ‡ç”Ÿæˆå¼AIäº’å‹•çš„å°è©±æ­·ç¨‹</a>
        <a href="#" data-target="reference">åƒè€ƒè³‡æ–™èˆ‡é™„éŒ„</a>
        <a href="#" data-target="team">è£½ä½œåœ˜éšŠ</a>
    </nav>
    <main>
        <section id="intro">
            <h2>å°ˆæ¡ˆç°¡ä»‹</h2>
            <p>æœ¬å°ˆæ¡ˆæ˜¯ä¸€ä»½æ•¸æ“šåˆ†æåˆ†çµ„æœŸä¸­å ±å‘Šã€‚ä¸»é¡Œæ˜¯ç´„æœƒæ‡‰ç”¨ç¨‹å¼è¡Œç‚ºçµæœé æ¸¬ã€‚</p>
        </section>
        <section id="project">
            <h2>å°ˆæ¡ˆä»‹ç´¹</h2>
            <ul>
                <li><strong>ç ”ç©¶èƒŒæ™¯ï¼š</strong>æœ¬ç ”ç©¶ä½¿ç”¨æŸäº¤å‹æ‡‰ç”¨ç¨‹å¼å»ºç«‹çš„åˆæˆè³‡æ–™é›†ï¼Œæ¨¡æ“¬ä½¿ç”¨è€…åœ¨è™›æ§‹äº¤å‹å¹³å°ä¸Šçš„çœŸå¯¦äº’å‹•è¡Œç‚ºï¼Œè³‡æ–™å…§å®¹æ¶µè“‹ä½¿ç”¨è€…åŸºæœ¬è³‡æ–™ã€ä½¿ç”¨ç¿’æ…£ã€æ»‘å‹•åå¥½èˆ‡é…å°çµæœã€‚</li>
                <li><strong>ç ”ç©¶å•é¡Œï¼š</strong>
                    <ul>
                        <li>ä½¿ç”¨è€…çš„å€‹äººç‰¹è³ªèˆ‡æ‡‰ç”¨ç¨‹å¼ä½¿ç”¨è¡Œç‚ºå°é…å°æˆåŠŸç‡æœ‰ä½•å½±éŸ¿ï¼Ÿ</li>
                        <li>å“ªäº›ç‰¹å¾µå°é…å°æˆåŠŸèˆ‡å¦å…·æœ‰æœ€å¼·çš„é æ¸¬åŠ›ï¼Ÿ</li>
                        <li>æ˜¯å¦èƒ½åŸºæ–¼ä¸Šè¿°å› ç´ å»ºç«‹ä¸€å€‹æº–ç¢ºé æ¸¬é…å°çµæœçš„æ©Ÿå™¨å­¸ç¿’æ¨¡å‹ï¼Ÿ</li>
                    </ul>
                </li>
            </ul>
        </section>
        <section id="data">
            <h2>æ•¸æ“šæè¿°</h2>
            <ul>
                <li><strong>æ•¸æ“šé›†çš„ä¾†æºï¼š</strong>è³‡æ–™é›†ä¾†æºç‚º Kaggleã€‚</li>
                <li><strong>æ•¸æ“šé›†æè¿°ï¼š</strong>
                    <ul>
                        <li>å€‹äººç‰¹è³ª: Gender, Age, Zodiac Sign ç­‰ã€‚</li>
                        <li>ä½¿ç”¨è¡Œç‚º: App Usage Time Min, Swipe Right Ratio ç­‰ã€‚</li>
                        <li>é…å°çµæœ: match_outcome (é…å°çµæœ)ã€‚</li>
                    </ul>
                </li>
            </ul>
        </section>
        <section id="model">
            <h2>æ¨¡å‹é¸æ“‡èˆ‡è¨“ç·´</h2>
            <ul>
                <li><strong>æ¡ç”¨ä¹‹æ¨¡å‹ï¼š</strong>
                    <ul>
                        <li>æ±ºç­–æ¨¹: æ˜“æ–¼ç†è§£å’Œè¦–è¦ºåŒ–ï¼Œé©åˆè™•ç†æ··åˆé¡å‹ç‰¹å¾µã€‚</li>
                        <li>éš¨æ©Ÿæ£®æ—: é›†æˆå­¸ç¿’ï¼Œæº–ç¢ºç‡é«˜ï¼Œæ³›åŒ–èƒ½åŠ›ä½³ã€‚</li>
                    </ul>
                </li>
                <li><strong>è¨“ç·´é›†èˆ‡æ¸¬è©¦é›†æ¯”ä¾‹ï¼š</strong>
                    <ul>
                        <li>1:9, 2:8, 3:7, 4:6ã€‚</li>
                    </ul>
                </li>
            </ul>
        </section>
        <section id="results">
            <h2>é æ¸¬çµæœ</h2>
            <ul>
                <li><strong>æ¨¡å‹è©•ä¼°èˆ‡æ¯”è¼ƒï¼š</strong>
                    <ul>
                        <li>æ±ºç­–æ¨¹æ¨¡å‹æº–ç¢ºç‡ç´„ç‚º 10.25%ã€‚</li>
                        <li>éš¨æ©Ÿæ£®æ—æ¨¡å‹æº–ç¢ºç‡ç´„ç‚º 9.75%ã€‚</li>
                    </ul>
                </li>
                <li><strong>é æ¸¬çµæœåˆ†æï¼š</strong>
                    <ul>
                        <li>æ•´é«”æº–ç¢ºç‡ä½æ–¼é æœŸï¼Œæ¨¡å‹è¡¨ç¾æ¥è¿‘éš¨æ©ŸçŒœæ¸¬ã€‚</li>
                    </ul>
                </li>
            </ul>
        </section>
        <section id="insight">
            <h2>çµ„å“¡å¿ƒå¾—</h2>
            <ul>
                <li>ç‹åŸ¹å®‰: å°ç´„æœƒè»Ÿé«”ä¸»é¡Œæ„Ÿèˆˆè¶£ï¼Œå˜—è©¦è§£æ±ºæ¨¡å‹æº–ç¢ºç‡éä½çš„å•é¡Œã€‚</li>
                <li>èƒ¡å®‰æ²‚: è³‡æ–™ç­†æ•¸èˆ‡è¤‡é›œåº¦é«˜æ–¼èª²å ‚ç·´ç¿’ï¼Œå˜—è©¦å„ç¨®æ–¹æ³•ä½†ç„¡é¡¯è‘—æ”¹å–„ã€‚</li>
            </ul>
        </section>
        <section id="dialogue">
            <h2>èˆ‡ç”Ÿæˆå¼AIäº’å‹•çš„å°è©±æ­·ç¨‹</h2>
            <p>äº’å‹•æ¶µè“‹è³‡æ–™æª¢è¦–ã€è³‡æ–™æ¸…ç†ã€ç‰¹å¾µå·¥ç¨‹ã€æ¨¡å‹é¸æ“‡èˆ‡çµæœè¦–è¦ºåŒ–ç­‰éšæ®µã€‚</p>
        </section>
        <section id="reference">
            <h2>åƒè€ƒè³‡æ–™èˆ‡é™„éŒ„</h2>
        <h3>é™„éŒ„ä¸€ï¼šæœ¬å ±å‘Šä¹‹åŸå§‹ç¨‹å¼ç¢¼ (Python)</h3>

        <h4>æ±ºç­–æ¨¹ï¼š</h4>
        <pre>
<code>
æ±ºç­–æ¨¹ï¼š
import pandas as pd
import chardet
from sklearn.preprocessing import OneHotEncoder, LabelEncoder, MultiLabelBinarizer
from sklearn.model_selection import train_test_split
from sklearn.tree import DecisionTreeClassifier, plot_tree
from sklearn.metrics import classification_report, confusion_matrix
import matplotlib.pyplot as plt
import seaborn as sns

# ==== Step 1: è‡ªå‹•åµæ¸¬æª”æ¡ˆç·¨ç¢¼ ====
file_path = 'dating_app_behavior_dataset_extended1.csv'
with open(file_path, 'rb') as f:
    result = chardet.detect(f.read(10000))
    encoding = result['encoding']
    print(f"ğŸ” åµæ¸¬åˆ°ç·¨ç¢¼ï¼š{encoding}")

# ==== Step 2: è®€å–æª”æ¡ˆ ====
df = pd.read_csv(file_path, encoding=encoding)
print("âœ… æª”æ¡ˆè®€å–æˆåŠŸï¼")

# ==== Step 3: æ¸…ç† education_level æ¬„ä½ ====
print("ğŸ“ åŸå§‹æ•™è‚²ç¨‹åº¦åˆ†é¡:")
print(df['education_level'].unique())

df['education_level'] = df['education_level'].str.replace(r'\?â„¢s', 's', regex=True)
df['education_level'] = df['education_level'].str.normalize('NFKD').str.encode('ascii', errors='ignore').str.decode('utf-8')

print("âœ¨ æ¸…ç†å¾Œæ•™è‚²ç¨‹åº¦åˆ†é¡:")
print(df['education_level'].unique())

# ==== Step 4: æ¸…ç† interest_tags æ¬„ä½ ====
df['interest_tags'] = df['interest_tags'].fillna('')

def process_interest_tags(tags):
    if isinstance(tags, str):
        return [i.strip() for i in tags.split(',') if i.strip()]
    elif isinstance(tags, list):
        return [i.strip() for i in tags if i.strip()]
    return []

df['interest_tags'] = df['interest_tags'].apply(process_interest_tags)

mlb = MultiLabelBinarizer()
interest_encoded = pd.DataFrame(mlb.fit_transform(df['interest_tags']), columns=['interest_' + i for i in mlb.classes_])
df = pd.concat([df, interest_encoded], axis=1)
df = df.drop('interest_tags', axis=1)

# ==== Step 5: ç‰¹å¾µç·¨ç¢¼ ====
categorical_cols = ['gender', 'sexual_orientation', 'location_type', 'swipe_time_of_day', 'zodiac_sign', 'body_type', 'relationship_intent']
ordinal_cols = ['income_bracket', 'education_level', 'app_usage_time_label', 'swipe_right_label']

ohe = OneHotEncoder(handle_unknown='ignore', sparse_output=False)
encoded_categorical = ohe.fit_transform(df[categorical_cols])
encoded_categorical_df = pd.DataFrame(encoded_categorical, columns=ohe.get_feature_names_out(categorical_cols))
df = df.drop(categorical_cols, axis=1)
df = pd.concat([df, encoded_categorical_df], axis=1)

for col in ordinal_cols:
    le = LabelEncoder()
    df[col] = le.fit_transform(df[col].astype(str))

# ==== Step 6: ç›®æ¨™è®Šæ•¸è™•ç† ====
le_y = LabelEncoder()
df['match_outcome'] = le_y.fit_transform(df['match_outcome'])
X = df.drop(columns=['match_outcome'])
y = df['match_outcome']

# ==== Step 7: åˆ‡åˆ†æ¯”ä¾‹ ====
split_ratios = {
    "1:9 (test_size=0.1)": 0.1,
    "2:8 (test_size=0.2)": 0.2,
    "3:7 (test_size=0.3)": 0.3,
    "4:6 (test_size=0.4)": 0.4
}

# ==== Step 8: æ¨¡å‹è¨“ç·´èˆ‡è©•ä¼° ====
for label, ratio in split_ratios.items():
    print(f"\n===== ğŸ“Š æ±ºç­–æ¨¹æ¨¡å‹åˆ†æï¼š{label} =====")
    
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=ratio, random_state=42)

    model = DecisionTreeClassifier(max_depth=5, random_state=42)
    model.fit(X_train, y_train)

    y_pred = model.predict(X_test)
    target_names = [str(cls) for cls in le_y.classes_]
    print(classification_report(y_test, y_pred, target_names=target_names))

    # æ··æ·†çŸ©é™£
    plt.figure(figsize=(8, 5))
    sns.heatmap(confusion_matrix(y_test, y_pred), annot=True, fmt='d', cmap='Blues',
                xticklabels=le_y.classes_, yticklabels=le_y.classes_)
    plt.title(f"Confusion Matrix - {label}")
    plt.xlabel("Predicted")
    plt.ylabel("Actual")
    plt.show()

    # æ±ºç­–æ¨¹åœ–
    plt.figure(figsize=(20, 8))
    plot_tree(model, feature_names=X.columns, class_names=target_names,
              filled=True, rounded=True, fontsize=9)
    plt.title(f"Decision Tree Visualization - {label}")
    plt.show()

</code>
        </pre>

        <h4>éš¨æ©Ÿæ£®æ—ï¼š</h4>
        <pre>
<code>
import pandas as pd
import chardet
from sklearn.preprocessing import OneHotEncoder, LabelEncoder, MultiLabelBinarizer
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier
from sklearn.metrics import classification_report, confusion_matrix
import matplotlib.pyplot as plt
import seaborn as sns

# === Step 1: è®€å–è³‡æ–™ä¸¦è™•ç†ç·¨ç¢¼ ===
file_path = 'dating_app_behavior_dataset_extended1.csv'
with open(file_path, 'rb') as f:
    result = chardet.detect(f.read(10000))
    encoding = result['encoding']
df = pd.read_csv(file_path, encoding=encoding)

# === Step 2: æ¸…ç† education_level ===
df['education_level'] = df['education_level'].str.replace(r'\?â„¢s', 's', regex=True)
df['education_level'] = df['education_level'].str.normalize('NFKD').str.encode('ascii', errors='ignore').str.decode('utf-8')

# === Step 3: æ¸…ç† interest_tags ä¸¦åš One-Hot ç·¨ç¢¼ ===
df['interest_tags'] = df['interest_tags'].fillna('')
def process_interest_tags(tags):
    if isinstance(tags, str):
        return [i.strip() for i in tags.split(',') if i.strip()]
    elif isinstance(tags, list):
        return [i.strip() for i in tags if i.strip()]
    return []
df['interest_tags'] = df['interest_tags'].apply(process_interest_tags)
mlb = MultiLabelBinarizer()
interest_encoded = pd.DataFrame(mlb.fit_transform(df['interest_tags']), columns=['interest_' + i for i in mlb.classes_])
df = pd.concat([df.drop(columns=['interest_tags']), interest_encoded], axis=1)

# === Step 4: ç‰¹å¾µç·¨ç¢¼ ===
categorical_cols = ['gender', 'sexual_orientation', 'location_type','swipe_time_of_day', 'zodiac_sign', 'body_type', 'relationship_intent']
ordinal_cols = ['income_bracket', 'education_level', 'app_usage_time_label', 'swipe_right_label']
df[categorical_cols] = df[categorical_cols].astype(str)

ohe = OneHotEncoder(handle_unknown='ignore', sparse_output=False)
encoded_categorical = ohe.fit_transform(df[categorical_cols])
encoded_df = pd.DataFrame(encoded_categorical, columns=ohe.get_feature_names_out(categorical_cols))
df = pd.concat([df.drop(columns=categorical_cols), encoded_df], axis=1)

for col in ordinal_cols:
    le = LabelEncoder()
    df[col] = le.fit_transform(df[col].astype(str))

# === Step 5: ç›®æ¨™è®Šæ•¸ Label Encoding ===
le_y = LabelEncoder()
df['match_outcome'] = le_y.fit_transform(df['match_outcome'])
X = df.drop(columns=['match_outcome'])
y = df['match_outcome']

#è³‡æ–™æ¨™æº–åŒ–/æ­£è¦åŒ–
from sklearn.preprocessing import StandardScaler
scaler = StandardScaler()
X_scaled = scaler.fit_transform(X) # Now X should only contain numerical features

# === Step 6: å®šç¾©åˆ‡åˆ†æ¯”ä¾‹ ===
split_ratios = {
    "1:9 (test_size=0.1)": 0.1,
    "2:8 (test_size=0.2)": 0.2,
    "3:7 (test_size=0.3)": 0.3,
    "4:6 (test_size=0.4)": 0.4
}

# === Step 7: è¿´åœˆè¨“ç·´èˆ‡è©•ä¼°æ¨¡å‹ ===
for label, ratio in split_ratios.items():
    print(f"\nğŸŒ²ğŸŒ²ğŸŒ² Random Forest æ¨¡å‹åˆ†æï¼š{label} ğŸŒ²ğŸŒ²ğŸŒ²")

    # è³‡æ–™åˆ‡åˆ†
    X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=ratio, random_state=42)

    # æ¨¡å‹è¨“ç·´
    rf = RandomForestClassifier(n_estimators=200, max_depth=15, random_state=42)
    rf.fit(X_train, y_train)

    # é æ¸¬èˆ‡å ±å‘Š
    y_pred = rf.predict(X_test)
    print(classification_report(y_test, y_pred, target_names=le_y.classes_))

    # æ··æ·†çŸ©é™£è¦–è¦ºåŒ–
    cm = confusion_matrix(y_test, y_pred)
    plt.figure(figsize=(8, 6))
    sns.heatmap(cm, annot=True, fmt='d', cmap='YlGnBu',
                xticklabels=le_y.classes_, yticklabels=le_y.classes_)
    plt.title(f"ğŸ¯ Confusion Matrix - {label}")
    plt.xlabel("Predicted")
    plt.ylabel("Actual")
    plt.tight_layout()
    plt.show()

</code>
        </section>
        <section id="team">
            <h2>è£½ä½œåœ˜éšŠ</h2>
            <ul>
                <li>çµ„å“¡: B1111026 èƒ¡å®‰æ²‚, B1111029 ç‹åŸ¹å®‰ã€‚</li>
                <li><strong>å·¥ä½œåˆ†å·¥ï¼š</strong>
                    <ul>
                        <li>ç‹åŸ¹å®‰: ç‰¹å¾µå·¥ç¨‹ã€è³‡æ–™æ¸…ç†ã€‚</li>
                        <li>èƒ¡å®‰æ²‚: æ¨¡å‹é¸æ“‡èˆ‡è¨“ç·´ã€‚</li>
                    </ul>
                </li>
            </ul>
        </section>
    </main>
    <script>
        const navLinks = document.querySelectorAll('nav a');
        const sections = document.querySelectorAll('section');

        navLinks.forEach(link => {
            link.addEventListener('click', function(event) {
                event.preventDefault();

                // Remove active class from all links
                navLinks.forEach(nav => nav.classList.remove('active'));

                // Add active class to the clicked link
                this.classList.add('active');

                // Hide all sections
                sections.forEach(section => section.classList.remove('active'));

                // Show the targeted section
                const target = this.getAttribute('data-target');
                document.getElementById(target).classList.add('active');

                // Show main area
                document.querySelector('main').style.display = 'block';
            });
        });
    </script>
</body>
</html>